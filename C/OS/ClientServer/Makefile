PROG_SERVER=	server
SRCS_SERVER=	Server.c
OBJS_SERVER=	Server.o

PROG_CLIENT=	client
SRCS_CLIENT=	Client.c
OBJS_CLIENT=	Client.o

CPPFLAGS_STD?=	-D_POSIX_C_SOURCE=200809L -D_XOPEN_SOURCE=700
CPPFLAGS+=	${CPPFLAGS_STD}

CFLAGS_OPT?=	-O2 -g -pipe
CFLAGS_STD?=	-std=c99
CFLAGS_WARN?=	-pthread -Wall -W -Wextra -Wpedantic

CFLAGS?=	${CFLAGS_OPT}
CFLAGS+=	${CFLAGS_STD} ${CFLAGS_WARN}

all:		${PROG_SERVER} ${PROG_CLIENT}

${PROG_SERVER}:	${OBJS_SERVER}
		${CC} ${LDFLAGS} -o ${PROG_SERVER} ${OBJS_SERVER}

${PROG_CLIENT}:	${OBJS_CLIENT}
		${CC} ${LDFLAGS} -o ${PROG_CLIENT} ${OBJS_CLIENT}

Client.o:	Client.c Comm.h

Server.o:	Server.c Comm.h

clean:
		rm -f ${PROG_SERVER} ${OBJS_SERVER} ${PROG_CLIENT} ${OBJS_CLIENT}
