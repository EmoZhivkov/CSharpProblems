#!/bin/bash

bestTime="0"
bestUser="<none>"
bestFile="<none>"

while read user home
do
	if [[ ! -d $home ]]
	then
		continue
	fi

	cand=$(find "$home" -type f -printf "%T@#%p\n" 2>/dev/null | sort -t '#' -k1 -nr | head -n 1)
	candTime=$(echo "$cand" | sed -E 's_^([0-9.]+)#.*_\1_')
	candFile=$(echo "$cand" | sed -E 's_^[0-9.]+#(.*)_\1_')

	#echo "$user $candTime $candFile"

	if [[ -z $candTime ]]
	then
		continue
	fi

	cmp=$(echo "$candTime > $bestTime" | bc)
	if [[ 1 -eq $cmp ]]
	then
		bestTime="$candTime"
		bestUser="$user"
		bestFile="$candFile"
	fi
done < <(cat /etc/passwd | cut -d':' -f1,6 | sed 's_:_ _')

echo "[user] [file] [time]"
echo "$bestUser $bestFile $bestTime"